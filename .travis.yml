sudo: required

dist: trusty

language: rust

os:
  - linux

env:
  matrix:
   - LLVM_VERSION=3.8

rust:
  - nightly
  - beta
  - stable

before_script:
  - wget -O - http://apt.llvm.org/llvm-snapshot.gpg.key|sudo apt-key add -
  - echo "deb http://apt.llvm.org/precise/ llvm-toolchain-precise-$LLVM_VERSION main" | sudo tee -a /etc/apt/sources.list
  - sudo apt-get update -qq
  - git submodule update --init --recursive

script:
  - (cd croaring-sys && cargo test)
  - cargo test
  - |
    [ $TRAVIS_RUST_VERSION != nightly ] ||
    cargo bench
